# AI社員間連携ガイド

## チーム連携の全体像

複数のAI社員を作って連携させることで、一人では難しい複雑な業務を分担・並列処理できます。

## members.yaml（組織名簿）

チームのAI社員一覧を `members.yaml` で管理します。

```yaml
team_name: "my-ai-team"
members:
  - name: "リン"
    role: "COO"
    directory: "リン_executive_COO"
    skills:
      - 経営参謀
      - チーム統括
  - name: "ミナミ"
    role: "秘書"
    directory: "ミナミ_secretary"
    skills:
      - メール管理
      - スケジュール管理
```

### members.yamlの設計ポイント

- **name**: 呼びやすい名前
- **role**: 一目で分かる役割名
- **directory**: CLAUDE.mdが置かれるディレクトリ名
- **skills**: そのAI社員が得意なことリスト

## INBOX.md（メッセージシステム）

AI社員間の連携は、各自の `INBOX.md` ファイルを通じて行います。

### INBOXの構造

```markdown
# INBOX

## 未処理

【リンより】明日の会議資料を準備してください。
優先度: 高
期限: 2026-02-23

## 処理済み

✅ 【リンより】日報を提出してください → 完了
```

### メッセージの書き方

```
【送信者名より】メッセージ内容
```

### 連携フロー

1. 送信者が相手の `INBOX.md` に追記
2. 相手を起動スクリプトで起動
3. 相手が起動時にINBOXを確認
4. タスクを処理
5. 完了したら「✅完了」マークを付ける
6. 必要に応じて送信者のINBOXに返信

## start-employee.sh（起動スクリプト）

AI社員を起動するためのシェルスクリプト。

```bash
#!/bin/bash
# AI社員起動スクリプト
EMPLOYEE_NAME="$1"
EMPLOYEE_DIR="/path/to/team/${EMPLOYEE_NAME}"

cd "${EMPLOYEE_DIR}" && claude --resume
```

### 使い方

```bash
bash tools/start-employee.sh "ミナミ_secretary"
```

## 権限マトリクス

AI社員ごとにアクセスできる情報・操作を制限します。

```markdown
| 領域 | リン(COO) | ミナミ(秘書) | カイト(エンジニア) |
|------|-----------|-------------|-------------------|
| 財務データ | ✅読み取り | ❌ | ❌ |
| メール送信 | ❌ | ✅下書きのみ | ❌ |
| デプロイ | ❌ | ❌ | ✅ |
| CLAUDE.md編集 | ✅ | ❌ | ❌ |
```

### 権限設計の原則

1. **最小権限**: 必要な権限だけを付与
2. **機密分離**: 財務データなどは限定メンバーのみ
3. **操作制限**: 外部への影響がある操作は特に慎重に
4. **監査可能**: 誰が何をしたかをログで追跡可能に

## 連携パターン

### 1. リレー型（順次処理）
```
リサーチャー → ライター → 品質管理
```
前工程の成果物を次工程に引き渡す。

### 2. ハブ&スポーク型（中央集権）
```
    リサーチャー
      ↑
COO ← → ライター
      ↓
    デザイナー
```
COOが全体を統括し、各メンバーに指示・調整。

### 3. 並列型（独立処理）
```
リサーチャー ──→ 結果A
ライター ──────→ 結果B  → 統合
デザイナー ────→ 結果C
```
独立したタスクを同時並行で処理。

## トラブルシューティング

| 問題 | 原因 | 対策 |
|------|------|------|
| INBOXが処理されない | 相手が起動していない | start-employee.shで起動 |
| 権限エラー | 権限マトリクス違反 | CLAUDE.mdの権限設定を確認 |
| タスクの重複 | 分担が不明確 | members.yamlのskillsを明確化 |
| 連携が遅い | 直列処理になっている | 並列化可能なタスクを特定 |

# 📚 ベストプラクティス リファレンス

## Claude Code を最大限活用するために

このドキュメントでは、Claude Code を効果的に使うためのベストプラクティスをまとめています。

## 1. プロンプトの書き方

### 明確で具体的に

✅ 良い例:
```
src/utils/date.ts の formatDate 関数を修正して、
タイムゾーンを考慮した ISO 8601 形式で出力するようにして
```

❌ 悪い例:
```
日付の関数を直して
```

### コンテキストを与える

✅ 良い例:
```
このプロジェクトは React + TypeScript で、
コンポーネントは関数コンポーネントで書いています。
新しいボタンコンポーネントを作成して
```

❌ 悪い例:
```
ボタン作って
```

### 段階的に指示する

大きなタスクは分割して：

```
1. まず src/components/ の構造を確認して
2. 次に Button.tsx のコードを見せて
3. そのスタイルを変更する方法を提案して
```

## 2. CLAUDE.md の設計

### 必須セクション

```markdown
# プロジェクト名

## 概要
（1-2文で簡潔に）

## 技術スタック
（箇条書きで）

## コマンド
（よく使うものを）

## 禁止事項
（絶対にやってはいけないこと）
```

### 更新のタイミング

- 新しいライブラリ導入時
- コーディング規約変更時
- プロジェクト構造変更時
- 新メンバー参加時

## 3. Skills の設計原則

### 単一責任

1スキル = 1目的

```
/test     - テスト実行
/lint     - リント実行
/format   - フォーマット
/deploy   - デプロイ
```

### 命名規則

- 動詞で始める: `/check`, `/run`, `/create`
- 短く: 2-3音節が理想
- 一貫性: 類似機能には類似命名

### 必須要素

```markdown
# /skill-name - 一行説明

## 起動時の動作
（番号付きリスト）

## パラメータ
（あれば）

## 出力形式
（期待される結果）
```

## 4. Hooks の活用パターン

### 検証パターン

```json
{
  "PreToolUse": [
    {
      "matcher": "Bash(rm *)",
      "hooks": [{ "type": "command", "command": "echo '削除操作を検知'" }]
    }
  ]
}
```

### ログパターン

```json
{
  "PostToolUse": [
    {
      "matcher": "*",
      "hooks": [{ "type": "command", "command": "logger 'Claude: $TOOL_NAME'" }]
    }
  ]
}
```

### 自動化パターン

```json
{
  "PostToolUse": [
    {
      "matcher": "Write(*.ts)",
      "hooks": [{ "type": "command", "command": "eslint --fix $TOOL_INPUT" }]
    }
  ]
}
```

## 5. ワークフロー統合

### Git ワークフロー

```
1. /status で状況確認
2. 作業実施
3. /format でコード整形
4. /test でテスト
5. /commit でコミット
6. /pr でプルリクエスト
```

### レビューワークフロー

```
1. PR の差分を確認
2. CLAUDE.md のルールと照合
3. コメントを生成
4. 修正提案
```

### デバッグワークフロー

```
1. エラーログを読ませる
2. 関連コードを特定
3. 原因を分析
4. 修正案を提示
5. テストで確認
```

## 6. チーム開発での活用

### 共有すべきもの

- `CLAUDE.md` - プロジェクト設定
- `.claude/skills/` - チームスキル
- コーディング規約

### 個人で管理すべきもの

- `CLAUDE.local.md` - 個人設定
- `~/.claude/settings.json` - 個人フック

### コードレビューでの活用

```
このPRをレビューして、以下の観点でチェック:
1. CLAUDE.md のルールに違反していないか
2. テストが十分か
3. パフォーマンスの問題はないか
```

## 7. セキュリティ

### 絶対にやってはいけないこと

- API キーを CLAUDE.md に書く
- 本番DBへの直接接続
- rm -rf などの危険なコマンドを自動化

### 推奨事項

- 環境変数を使用
- サンドボックス環境でテスト
- 重要操作前の確認を必須に

## 8. パフォーマンス最適化

### コンテキストの管理

- 不要なファイルは読ませない
- 長いセッションは適宜 `/clear`
- 大きなファイルは部分指定

### 効率的な作業

- まとめて指示
- 繰り返しはスキル化
- 自動化できるものはフック化

## 9. トラブルシューティングフロー

```
問題発生
    ↓
1. エラーメッセージを確認
    ↓
2. 関連ファイルを特定
    ↓
3. 最近の変更を確認
    ↓
4. 原因を分析
    ↓
5. 修正を適用
    ↓
6. テストで確認
    ↓
解決！
```

## 10. 継続的改善

### 定期的に見直すこと

- [ ] CLAUDE.md は最新か？
- [ ] 不要なスキルはないか？
- [ ] フックは正しく動いているか？
- [ ] 新しいパターンを追加できるか？

### 学習を続ける

- 公式ドキュメントをチェック
- 新機能を試す
- チームで知見を共有

## まとめ

Claude Code を最大限活用するための鍵：

1. **明確なコミュニケーション** - 具体的に指示
2. **適切なコンテキスト** - CLAUDE.md を整備
3. **自動化** - Skills と Hooks を活用
4. **セキュリティ意識** - 危険な操作に注意
5. **継続的改善** - 定期的な見直し

これらを実践することで、開発効率を大幅に向上させることができます。

🦍 ウホッ！これで君もジャングルの王だ！ 🦍

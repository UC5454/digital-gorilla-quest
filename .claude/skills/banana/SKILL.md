# /banana - クエスト完了判定

クエストの完了を判定し、バナナポイントを付与する。

## 起動時の動作

1. `gorilla_data/progress.json` を読み込む
2. 現在のクエスト（current）を特定
3. クエストファイルから成功条件を読み込む
4. ユーザーに確認（実際に条件を満たしたか）
5. 完了判定・BP付与・レベルアップ処理

## 成功条件の確認方法

クエストの成功条件は基本的に自己申告制。
ただし、一部のクエストでは検証可能なものもある：

- ファイルの存在確認
- コマンドの実行結果確認
- 設定ファイルの内容確認

## 完了時の演出

### 通常完了
```
🍌🍌🍌🍌🍌🍌🍌🍌🍌🍌

  ウホホホーーー！！！

  Quest [番号] クリア！

  🍌 +[BP] バナナポイント獲得！

  [現在のBP] / [次のレベルまで] BP

🍌🍌🍌🍌🍌🍌🍌🍌🍌🍌
```

### レベルアップ時
```
🦍💥⚡💥🦍

  ドドドドドド...

  ＊ドラミング＊

  レベルアップ！！！

  Lv.[旧レベル] → Lv.[新レベル]

  [称号が変わった場合]
  進化！ [旧称号] → [新称号]

🦍💥⚡💥🦍
```

### バッジ獲得時
```
🏆✨ NEW BADGE ✨🏆

  バッジ「[バッジ名]」を獲得！

  [バッジの説明]
```

### 初回クリアボーナス
初めてクリアするクエストには +20% のボーナスBPを付与。

## progress.json更新

- banana_points を加算
- power_level を更新（閾値を超えた場合）
- title を更新（レベルに応じて）
- quests.completed に追加
- quests.current を null に
- 該当エリアの quests_completed をインクリメント
- badges に新規バッジを追加（条件達成時）
- エリア全クリア時は boss_available を true に

## バッジ付与条件

| バッジ | 条件 |
|--------|------|
| 第一歩 | Q1クリア |
| 草原の覇者 | 草原ボス撃破 |
| 森の支配者 | 森林ボス撃破 |
| 山の王者 | 山岳ボス撃破 |
| 洞窟の主 | 洞窟ボス撃破 |
| ジャングルの王 | 全ボス撃破 |
| CLI使い | Q6クリア |
| 記憶の番人 | Q12クリア |
| 技の達人 | Q18クリア |
| 連鎖の魔術師 | Q24クリア |
| 伝説のゴリラ | Q30クリア |

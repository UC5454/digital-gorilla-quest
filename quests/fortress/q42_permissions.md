# Quest 42: 権限と安全

## 🦍 導入

ウホッ！群れが大きくなると「やっていいこと」と「絶対にやっちゃいけないこと」の線引きが必要になる。

権限マトリクス——誰が何をできて、何を禁止するか。
これがないと、AI社員が暴走して取り返しのつかないことになりかねん。
砦を守る最後の掟を定めろ！

## 🎯 目標

- [ ] 権限マトリクス（操作 × AI社員の許可/禁止）を作成する
- [ ] 絶対禁止操作リストを定義する
- [ ] CLAUDE.mdに安全ルールを追加する

## 📋 やること

1. 権限マトリクスを設計する
2. 絶対禁止操作リストを定義する
3. CLAUDE.mdに安全ルールセクションを追加する

## 📎 コピペ

```
my-first-ai/CLAUDE.md に以下のセクションを追加して：

## 絶対禁止操作

| カテゴリ | 禁止コマンド/操作 | 理由 |
|----------|------------------|------|
| ファイル削除 | rm -rf, rm -r * | 復旧不可能な破壊 |
| Git破壊 | git push --force, git reset --hard | 履歴破壊・データ消失 |
| 権限昇格 | sudo * | システム全体への影響 |
| 危険な実行 | curl パイプ sh, wget パイプ bash | 任意コード実行 |

## 権限マトリクス

| 操作 | [AI社員A] | [AI社員B] |
|------|-----------|-----------|
| ファイル読み取り | ○ | ○ |
| ファイル作成・編集 | ○ | ○ |
| 外部API呼び出し | ○ | × |
| 機密情報アクセス | × | × |
| 本番デプロイ | × | × |
```

## ✅ 成功条件

- [ ] CLAUDE.mdに絶対禁止操作リストが追加されている
- [ ] 権限マトリクスが定義されている（最低4行×2列）
- [ ] 各AI社員の権限範囲が明確になっている

## 📦 成果物

- `my-first-ai/CLAUDE.md`（安全ルール追記）

## 🍌 報酬

- base_bp: 180
- first_clear_bonus: 36
- badge: team_leader
- badge_icon: 🏰
- badge_description: 群れの統率者

## 💡 ヒント

### hint_1
権限設計の基本原則は「最小権限の原則」。必要最低限の権限だけを与え、不要な権限は全て禁止する。

### hint_2
絶対禁止操作は「やったら取り返しがつかないもの」を中心にリストアップする。ファイル全削除、Git履歴破壊、システム権限変更などが代表例だ。

### hint_3
権限マトリクスは「操作カテゴリ × AI社員」の表で整理する。全員禁止の項目は共通ルール（CLAUDE.md上位）に、個別の権限はAI社員ごとのCLAUDE.mdに書くのがベストプラクティス。

よくある権限カテゴリ:
- ファイル操作（読み/書き/削除）
- コマンド実行（一般/管理者）
- 外部通信（API/メール/SNS）
- 機密データ（財務/個人情報）
- デプロイ（テスト/本番）

## 📚 学習ポイント

- 権限マトリクスは組織の「安全装置」。AI社員が増えるほど重要になる
- 「最小権限の原則」はAI組織でも人間の組織でも同じ
- 禁止操作をCLAUDE.mdに明記しておけば、AI社員は自律的にルールを守る

## 📖 関連リファレンス

docs/reference/08_team_coordination.md
